---
title: 'Diving into TypeScript'
date: '2019-09-02'
category: 'webdevelopment'
cover: ./stella-ribeiro-631365-unsplash.jpg
tags:
  - javascript
  - typescript
  - gatsby
published: false
---

## Some random obstacles

### Creating type definitions

When using a package that doesn't have any predefined type definitions, you can make or generate your own type definitions. In my case I had a package called `material-colors` which is an object export of all the colors in Google's material design. On converting my components to TypeScript I was introduced with the following error:

```javascript
Could not find a declaration file for module 'material-colors'.
  Try `npm install @types/material-colors` if it exists or add a new declaration (.d.ts) file containing `declare module 'material-colors';`
```

Okay so what now? In my search for an answer, I found the [`dts-gen`](https://github.com/Microsoft/dts-gen) npm package which can generate defenitions from `js` files. I installed it globally, ran `dts-gen -m material-colors` from the root of my project and presto, a `material-colors.d.ts` file appeared. I should have typechecking and my error should be gone now, right? Nope! The error is still there and still no type checking.

On inspecting the file generated by `dts-gen` I found the following:

```typescript
export = material_colors;

declare const material_colors: {
    ...
```

Now to be fair, I'm not entirely sure what this means, but I do know we should have declare a module definition somewhere. So changing this file to the following:

```typescript
declare module 'material-colors' {
  export default material_colors;
}

const material_colors: {
  ...
```

Is what did the trick for me. Now last but not least, you should also make sure this file is included in your `tsconfig.json` `types` option.

### Object bracket notation

In case you need to use bracket notation to get the value of an object (like `object[key]`), TypeScript will present you with a `Element has no index signature` error, even if you declared an interface for your object. To fix your code, you need to add this index signature to your Object.

```typescript

interface AnimationI {
  opacity: number;
  scale: number;
}
interface TransitionI {
  entering: AnimationI;
  leaving: AnimationI;
}

 const transitionStyles: TransitionI = {
   entering: { opacity: 0; scale: 0.5; };
   entered: { opacity: 1: scale: 1; };
 }

 // Gives "Element has no index signature" error
 transitionStyles['entered];

```

To solve this, we need to add an `index signature` to our `TransitionI` interface:

```typescript
interface TransitionI {
  entering: AnimationI;
  leaving: AnimationI;
  [key: string]: AnimationI;
}
```

This way the error is resolved and we keep all the typechecking goodness!
